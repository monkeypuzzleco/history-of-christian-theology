jQuery((function($){const customLightboxHTML='<div id="glightbox-body" class="glightbox-container">\n  <div class="gloader visible"></div>\n  <div class="goverlay"></div>\n  <div class="gcontainer ctl_glightbox_container">\n  <div id="glightbox-slider" class="gslider"></div>\n  <button class="gnext gbtn" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n  <button class="gprev gbtn" tabindex="1" aria-label="Previous">{prevSVG}</button>\n  <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n</div>\n</div>';function ctlStoryAnimation_loadMore(){$(".cooltimeline_cont").each((function(index){var timeline_id=$(this).attr("id"),animations;"none"!=$("#"+timeline_id).attr("data-animations")&&AOS.init({disable:"mobile",startEvent:"DOMContentLoaded",offset:75,delay:0,duration:750,easing:"ease-in-out-sine",mirror:!0})}))}const customPagination=(...e)=>{let total_pages=parseInt(e[0].total_page),current_pages=parseInt(e[0].current_page),prev_arrow="",next_arrow="",data=[],page_num=`<span class='page-numbers page-num' data-total-pages="${total_pages}">Page ${current_pages} of ${total_pages}</span>`,final_data;1!=current_pages&&(prev_arrow=`<span class="page-numbers ctl_custom_pagination ctl_custom_pagi_arrow prev" data_current_page="${current_pages-1}"> « </span>`);for(let i=1;i<=total_pages;i++){let data_value="",prev_dots="",prev_dots_sec="";total_pages<6?data_value=`<span class='page-numbers ctl_custom_pagination ${i==current_pages&&"current"}' data_current_page='${i}'>${i}</span>`:(current_pages<3&&i<4?(data_value=`<span class='page-numbers ctl_custom_pagination ${i==current_pages&&"current"}' data_current_page="${i}">${i}</span>`,prev_dots=3==i?'<span class="page-numbers dots">...</span>':""):1==i&&(data_value=`<span class='page-numbers ctl_custom_pagination' data_current_page="${i}">${i}</span>`,prev_dots=current_pages>3?'<span class="page-numbers dots">...</span>':""),current_pages>2&&i>1&&current_pages<total_pages-1&&i<total_pages-1&&i<=current_pages+1&&i>=current_pages-1&&(data_value=`<span class='page-numbers ctl_custom_pagination ${i==current_pages&&"current"}' data_current_page="${i}">${i}</span>`,i<=total_pages-3&&current_pages>=total_pages-4?i==total_pages-2&&(data_value=`<span class='page-numbers ctl_custom_pagination ${i==current_pages&&"current"}' data_current_page="${i}">${i}</span>`):i==current_pages+2&&(data_value=`<span class='page-numbers ctl_custom_pagination ${i==current_pages&&"current"}' data_current_page="${i}">${i}</span>`),current_pages!=total_pages-3&&(prev_dots_sec=i==current_pages+1?'<span class="page-numbers dots">...</span>':""),current_pages==total_pages-3&&(prev_dots_sec=i==total_pages-2?'<span class="page-numbers dots">...</span>':"")),current_pages>=total_pages-2&&i>=total_pages-2?data_value=`<span class='page-numbers ctl_custom_pagination ${i==current_pages&&"current"}' data_current_page="${i}">${i}</span>`:i==total_pages&&(data_value=`<span class='page-numbers ctl_custom_pagination' data_current_page="${i}">${i}</span>`)),data.push(data_value+prev_dots+prev_dots_sec)}return current_pages!=total_pages&&(next_arrow=`<span class="page-numbers ctl_custom_pagination ctl_custom_pagi_arrow next" data_current_page="${current_pages+1}"> » </span>`),page_num+prev_arrow+data.join("")+next_arrow},ctl_Ver_LineFill_callback=async e=>{await new Promise(timer=>setTimeout(timer,100)),ctl_vertical_ling_filling({data:e,async_callback:!0})};var loading=!1,timelineWrapper;1==$(".cool_timeline").find(".ctl_load_more").attr("data-max-num-pages")?$(".cool_timeline").find(".ctl_load_more").hide():naviLoadMoreBtn($(".cool_timeline"));function ctlCompactSettings($grid){null!=($grid=$(".clt-compact-cont"))&&($grid.masonry("reloadItems"),$grid.imagesLoaded((function(){$grid.masonry("layout")})),$grid.one("layoutComplete",(function(){var leftPos=0,topPosDiff;$grid.find(".timeline-mansory").each((function(index){(leftPos=$(this).position().left)<=0?$(this).removeClass("ctl-right").addClass("ctl-left"):$(this).removeClass("ctl-left").addClass("ctl-right"),(topPosDiff=$(this).position().top-$(this).prev().position().top)<40&&($(this).find(".timeline-icon").removeClass("compact-iconup").addClass("compact-icondown"),$(this).prev().find(".timeline-icon").removeClass("compact-icondown").addClass("compact-iconup"),$(this).find(".content-title").removeClass("compact-afterup").addClass("compact-afterdown"),$(this).prev().find(".content-title").removeClass("compact-afterdown").addClass("compact-afterup"),$(this).find(".timeline-content").removeClass("compact-afterup").addClass("compact-afterdown"),$(this).prev().find(".timeline-content").removeClass("compact-afterdown").addClass("compact-afterup"))})),$(".timeline-icon").addClass("showit"),$(".content-title").addClass("showit-after");var timeline_id=jQuery(".cooltimeline_cont").attr("id"),animations;"none"!=jQuery("#"+timeline_id).attr("data-animations")&&AOS.refreshHard()})))}function storySlideShow(container){container.find(".ctl_flexslider .slides").not(".slick-initialized").each((function(){var autoplaySpeed=parseInt($(this).data("animationspeed")),slideshow=$(this).data("slideshow");if($(this).parents(".cool-timeline").hasClass("compact"))var autoHeight=!1;else var autoHeight=!0;$(this).slick({dots:!1,infinite:!1,arrows:!0,mobileFirst:!0,pauseOnHover:!0,slidesToShow:1,autoplay:slideshow,autoplaySpeed:autoplaySpeed,adaptiveHeight:autoHeight})}))}function naviLoadMoreBtn(parent_wrp){parent_wrp.find(".ctl_load_more").length&&$("body").find(".ctl-bullets-container ul li").length&&parent_wrp.find(".ctl_load_more").each((function(){var loadMoreBtn=$(this),timelineId=loadMoreBtn.parents(".cool_timeline").attr("id"),naviContainer=$("#"+timelineId+"-navi"),buttonHtml='<button data-text="..Loading" class="ctl_load_more_clone">Load More</button>';naviContainer.find("ul").after(buttonHtml),naviContainer.find(".ctl_load_more_clone").on("click",(function(){var text=$(this).data("text");$(this).text(text),loadMoreBtn.trigger("click")}))}))}function storyYearNavigation(timeline_wrp){if(null!=timeline_wrp){var wrp_id=timeline_wrp.attr("id");$("#"+wrp_id+"-navi").remove();var pagination=timeline_wrp.attr("data-pagination"),pagination_position=timeline_wrp.attr("data-pagination-position"),bull_cls="",position="";"left"==pagination_position?(bull_cls="section-bullets-left",position="left"):"right"==pagination_position?(bull_cls="section-bullets-right",position="right"):"bottom"==pagination_position&&(bull_cls="section-bullets-bottom",position="bottom"),$("body").sectionScroll({bulletsClass:bull_cls,sectionsClass:"scrollable-section",scrollDuration:1500,titles:!0,topOffset:2,easing:"",id:wrp_id,position:position})}}$(".ctl_load_more").attr("data_current_page",2),$("body").on("click",".ctl_load_more,.ctl_custom_pagination:not('.current')",(function(e){if(e.preventDefault(),!loading){loading=!0;let currentElement=$(e.currentTarget);var timeline_wrp=$(this).parents(".cool_timeline"),wrp_id=timeline_wrp.attr("id"),UID=wrp_id.charAt(wrp_id.length-2)+wrp_id.charAt(wrp_id.length-1);UID=UID.replace("-","");let ctlTopPosition=timeline_wrp[0].offsetTop;if(wrp_id.startsWith("content"))var shortcode_type="content-timeline",ajax_action="ct_ajax_load_more",ctlloadmore=window["ct_load_more_"+UID];else var shortcode_type="story-timeline",ajax_action="ctl_ajax_load_more",ctlloadmore=window["ctlloadmore_"+UID];var org_label=$(this).text(),loading_text=$(this).attr("data-loading-text"),button=timeline_wrp.find(".ctl_load_more"),type=currentElement.hasClass("ctl_custom_pagination")?currentElement.closest(".custom-pagination").attr("data-timeline-type"):$(this).attr("data-timeline-type"),last_year=timeline_wrp.find(".timeline-year:last").data("section-title");if(currentElement.hasClass("ctl_custom_pagination")){jQuery(timeline_wrp.find(".cool_timeline_end")).addClass("innerViewPort"),jQuery(timeline_wrp.find(".center-line")).addClass("AfterViewPort");let last_pagi_div=timeline_wrp.find(".custom-pagination .page-num"),last_pagi_num,current_pagi_num,cust_pagination_data={total_page:parseInt($(last_pagi_div).attr("data-total-pages")),current_page:parseInt(currentElement.attr("data_current_page"))},loading_img=timeline_wrp.find(".custom-pagination").attr("data-loading_img");if(timeline_wrp.find(".custom-pagination").html(customPagination(cust_pagination_data)),"compact"==type){timeline_wrp.find(".cooltimeline_cont .clt-compact-cont .timeline-post").remove(),timeline_wrp.find(".clt-compact-cont").height("60px");let child_comment_node=timeline_wrp.find(".clt-compact-cont")[0].childNodes;$(child_comment_node).each((e,a)=>{a.nodeType===Node.COMMENT_NODE&&$(a).remove()});let loadInsertAfter=timeline_wrp.find(".clt-compact-cont .center-line");$("<div  class='filter-preloaders' style='display: block;'><img src='"+loading_img+"'></div>").insertAfter(loadInsertAfter[0])}else timeline_wrp.find(".cooltimeline_cont").html('<div  class="filter-preloaders" style="display: block;"><img src="'+loading_img+'"></div>');$(window).scrollTop(ctlTopPosition)}if("compact"==type)var last_year=timeline_wrp.find(".compact-year:last").data("section-title");else var last_year=timeline_wrp.find(".timeline-year:last").data("section-title");var allAtts=ctlloadmore.attribute,alternate=timeline_wrp.find(".timeline-post:last").data("alternate");if($(".ct-cat-filters").length&&$(".ct-cat-filters").hasClass("active-category")){var filterCat=$(".active-category").data("term-slug");allAtts.category=filterCat}$(this).html(loading_text);var max_pages=$(this).attr("data-max-num-pages"),max_page_num=parseInt(max_pages)+1,termSlug=jQuery(".ct-cat-filters.active-category").data("term-slug"),request_page=$(this).attr("data_current_page"),data={action:ajax_action,page:request_page,last_year:last_year,alternate:alternate,termslug:termSlug,attribute:allAtts,nonce:ctlloadmore.nonce};$.post(ctlloadmore.url,data,(function(res){if("string"==typeof res&&(res=JSON.parse(res)),res.success){var $grid;if(currentElement.hasClass("ctl_custom_pagination")){if(!currentElement.hasClass("active")){var $grid;if("compact"==type)timeline_wrp.find(".filter-preloaders").remove(),ctlCompactSettings($grid=timeline_wrp.find(".clt-compact-cont .center-line").after(res.data.html));else timeline_wrp.find(".cooltimeline_cont").html(""),timeline_wrp.find(".cooltimeline_cont").append(res.data.html);$(window).scrollTop(ctlTopPosition)}}else if("compact"==type)ctlCompactSettings($grid=timeline_wrp.find(".clt-compact-cont .timeline-post").last().after(res.data.html));else timeline_wrp.find(".cooltimeline_cont").append(res.data.html);GLightbox({selector:".ctl_glightbox_gallery",lightboxHTML:customLightboxHTML,svg:{close:'<i class="ctl_glightbox_close_btn"></i>'}}),storyYearNavigation(timeline_wrp),"story-timeline"==shortcode_type&&storySlideShow(timeline_wrp),naviLoadMoreBtn(timeline_wrp),ctlStoryAnimation_loadMore(),button.html(org_label),ctl_Ver_LineFill_callback(timeline_wrp);var next_page=parseInt(request_page)+1;button.attr("data_current_page",next_page),loading=!1,next_page>=max_page_num&&(button.hide(),$("#"+wrp_id+"-navi").find(".ctl_load_more_clone").hide())}})).fail((function(xhr,textStatus,e){console.log(xhr.responseText)}))}})),$(".ct-cat-filters").on("click",(function($event){if($event.preventDefault(),!loading){loading=!0,$(".ctl_load_more").attr("data_current_page",2);var timeline_wrp=$(this).parents(".cool_timeline");let custPagiDiv=timeline_wrp.find(".custom-pagination");timeline_wrp.find(".ctl_center_line_filling").height("0px"),custPagiDiv.length>0&&custPagiDiv.remove();var wrp_id=timeline_wrp.attr("id"),UID=wrp_id.charAt(wrp_id.length-2)+wrp_id.charAt(wrp_id.length-1);if(UID=UID.replace("-",""),wrp_id.startsWith("content"))var shortcode_type="content-timeline",ajax_action="ct_ajax_load_more",ctlloadmore=window["ct_load_more_"+UID];else var shortcode_type="story-timeline",ajax_action="ctl_ajax_load_more",ctlloadmore=window["ctlloadmore_"+UID];var cat_name=$(this).text(),parent_wrp=$(this).parents(".cool_timeline"),preloader=parent_wrp.find(".filter-preloaders");preloader.show();var parent_id,navigation="#"+parent_wrp.attr("id")+"-navi",termSlug=$(this).data("term-slug"),totalPosts=parseInt($(this).data("post-count")),action=$(this).data("action"),tm_type=$(this).data("tm-type"),type=$(this).data("type"),org_label=$(this).text(),loading_text=$(this).attr("data-loading-text");if("compact"==type)var last_year=parent_wrp.find(".active-category .compact-year:last").data("section-title");else var last_year=parent_wrp.find(".active-category .timeline-year:last").data("section-title");var alternate=parent_wrp.find(".timeline-post:last").data("alternate"),all_attrs=ctlloadmore.attribute,ajax_url=ctlloadmore.url,nonce=ctlloadmore.nonce,showPosts=$(".cool-timeline-wrapper").attr("data-showposts"),countPages=Math.ceil(totalPosts/showPosts);$(".ctl_load_more").attr("data-max-num-pages",countPages),page=2,totalPosts>showPosts?$(this).parents(".cool_timeline").find(".ctl_load_more").show():$(this).parents(".cool_timeline").find(".ctl_load_more").hide(),all_attrs.category=termSlug,$(".cat-filter-wrp ul li a").removeClass("active-category"),$(this).addClass("active-category"),"compact"==type?parent_wrp.find(".clt-compact-cont").html(" "):parent_wrp.find(".cooltimeline_cont").html(" ");var data={action:action,last_year:last_year,alternate:alternate,termslug:termSlug,attribute:all_attrs,nonce:nonce};$.post(ajax_url,data,(function(res){if("string"==typeof res&&"undefined"!=res&&(res=JSON.parse(res)),res.success){if(""!=res.data.pagination){if("compact"==type)parent_wrp.find(".cool-timeline").append(res.data.pagination);else{let lastDiv=parent_wrp.find(".cool_timeline_end");$(res.data.pagination).insertBefore(lastDiv[0])}parent_wrp.find(".custom-pagination").html(customPagination(res.data.cust_pagination))}var $grid;if("compact"==type)if(void 0!==res.data.html&&""!=res.data.html)parent_wrp.find(".clt-compact-cont").append('<div class="center-line"></div>'),ctlCompactSettings(parent_wrp.find(".clt-compact-cont").append(res.data.html)),parent_wrp.find(".ctl_load_more").removeClass("clt-hide-it");else parent_wrp.find(".ctl_load_more").addClass("clt-hide-it");else void 0!==res.data.html&&""!=res.data.html?(parent_wrp.find(".cooltimeline_cont").append(res.data.html),parent_wrp.find(".ctl_load_more").removeClass("clt-hide-it")):parent_wrp.find(".ctl_load_more").addClass("clt-hide-it");res.data.html.length<80?(parent_wrp.find(".no-content").remove(),parent_wrp.find(".cool-timeline").addClass("ctl_story_empty")):parent_wrp.find(".cool-timeline").removeClass("ctl_story_empty"),GLightbox({selector:".ctl_glightbox_gallery",lightboxHTML:customLightboxHTML,svg:{close:'<i class="ctl_glightbox_close_btn"></i>'}}),loading=!1,preloader.hide(),$(parent_wrp).find(".timeline-main-title").text(cat_name),$(parent_wrp).find(".no-content").hide(),storyYearNavigation(parent_wrp),storySlideShow(parent_wrp),naviLoadMoreBtn(parent_wrp),ctl_Ver_LineFill_callback(timeline_wrp);var timeline_id=jQuery(".cooltimeline_cont").attr("id"),animations;"none"!=jQuery("#"+timeline_id).attr("data-animations")&&AOS.refreshHard()}})).fail((function(xhr,textStatus,e){console.log(xhr.responseText)}))}}))}));
jQuery(document).ready((function(){window.ctl_ajax_loading=!1;const customLightboxHTML='<div id="glightbox-body" class="glightbox-container">\n            <div class="gloader visible"></div>\n            <div class="goverlay"></div>\n            <div class="gcontainer ctl_glightbox_container">\n            <div id="glightbox-slider" class="gslider"></div>\n            <button class="gnext gbtn" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n            <button class="gprev gbtn" tabindex="1" aria-label="Previous">{prevSVG}</button>\n            <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n        </div>\n        </div>';function year_swiper(e){total_year_navigation=jQuery("#"+e+" li").length,jQuery("#"+e).slick({dots:!1,infinite:!1,nextArrow:'<button type="button" class="ctl-slick-next ctl-flat-left"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>',prevArrow:'<button type="button" class="ctl-slick-prev ctl-flat-right"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>',mobileFirst:!0,slidesToShow:3,touchMove:!1,responsive:[{breakpoint:1040,settings:{slidesToShow:9}},{breakpoint:768,settings:{centerPadding:"10px",slidesToShow:6}},{breakpoint:560,settings:{centerPadding:"10px",slidesToShow:5}},{breakpoint:480,settings:{centerPadding:"10px",slidesToShow:4}}]})}function storySlideShow(container){container.find(".ctl_slideshow .slides").not(".slick-initialized").each((function(){var autoplaySpeed=parseInt(jQuery(this).data("animationspeed")),slideshow=jQuery(this).data("slideshow");if(jQuery(this).parents(".cool-timeline").hasClass("compact"))var autoHeight=!1;else var autoHeight=!0;jQuery(this).slick({dots:!1,infinite:!1,arrows:!0,mobileFirst:!0,pauseOnHover:!0,slidesToShow:1,autoplay:slideshow,autoplaySpeed:autoplaySpeed,adaptiveHeight:autoHeight})}))}function loadMore(e){let thisS=e,sliderNav="#"+thisS.attr("data-nav"),slider="#"+thisS.attr("date-slider"),items=parseInt(thisS.attr("data-items")),setting_filters=thisS.attr("filters"),request=parseInt(thisS.attr("data_current_page")),wrp_id=thisS.attr("data-wrapper");year_navigation=jQuery(thisS.find(".year-nav-wrp .ctl_h_yearNav")),year_navigation_id=null!=year_navigation[0]?year_navigation[0].id:void 0;var UID=wrp_id.charAt(wrp_id.length-2)+wrp_id.charAt(wrp_id.length-1);if(UID=UID.replace("-",""),wrp_id.startsWith("content"))var shortcode_type="content-timeline",ajax_action="ct_ajax_load_more",ctlloadmore=window["ct_load_more_"+UID];else var shortcode_type="story-timeline",ajax_action="ctl_ajax_load_more",ctlloadmore=window["ctlloadmore_"+UID];var last_year=thisS.find(".timeline-year:last").data("section-title"),allAtts=ctlloadmore.attribute;jQuery(this).unbind();var max_pages=jQuery(this).attr("data-max-num-pages"),termSlug=jQuery(".cth-cat-filters.active-category").data("term-slug"),request_page,data={action:ajax_action,page:thisS.attr("data_current_page"),last_year:last_year,main_wrp_id:wrp_id,termslug:termSlug,attribute:allAtts,layout:"horizontal",nonce:ctlloadmore.nonce};jQuery.post(ctlloadmore.url,data,(function(res){if("string"==typeof res&&(res=JSON.parse(res)),res.success){null!=year_navigation&&(year_navigation.hasClass("slick-slider")?jQuery(year_navigation).slick("slickAdd",res.data.hr_year_label):(jQuery(year_navigation).append(res.data.hr_year_label),year_swiper(year_navigation_id))),jQuery(sliderNav).slick("slickAdd",res.data.date_html),jQuery(slider).slick("slickAdd",res.data.html);let nextpage=request+1;thisS.attr("data_current_page",nextpage),GLightbox({selector:".ctl_glightbox_gallery",lightboxHTML:customLightboxHTML,svg:{close:'<i class="ctl_glightbox_close_btn"></i>'}}),"story-timeline"==shortcode_type&&storySlideShow(thisS),window.ctl_ajax_loading=!1}})).fail((function(xhr,textStatus,e){console.log(xhr.responseText)}))}jQuery(".cool-timeline-horizontal").each((function(){var thisS=jQuery(this),setting_pagination=thisS.attr("pagination"),sliderNav="#"+thisS.attr("data-nav");show_items=parseInt(thisS.attr("data-items")),"ajax_load_more"==setting_pagination&&(thisS.attr("data_current_page",2),jQuery(sliderNav).on("afterChange",(function(event,slick,currentSlide,nextSlide){if(0==window.ctl_ajax_loading){let showitems=slick.originalSettings.slidesToShow,totalStories=slick.slideCount-1,laststory=slick.currentSlide+show_items,request,totalPages;if(parseInt(thisS.attr("data_current_page"))<=parseInt(thisS.attr("data-max-num-pages"))&&laststory>=totalStories){window.ctl_ajax_loading=!0,loadMore(thisS);let next_button,button_new_cls="<i class='fa fa-spinner fa-spin'></i>";thisS.find(".ctl-flat-left").html(button_new_cls)}}})))}))}));
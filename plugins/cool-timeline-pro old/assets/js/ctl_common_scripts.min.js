jQuery("document").ready((function($){const popupSlick=e=>{let sliderimg=[];return Object.keys(e).forEach(key=>{null!=jQuery(e[key]).attr("src")&&sliderimg.push(`<div><img src="${jQuery(e[key]).attr("src")}"/></div>`)}),'<div class="ctl_glightbox_slideshow"><div class="ctl_popup_slick"><div class="slides">'+sliderimg.join("")+"</div></div></div>"},customLightboxHTML='<div id="glightbox-body" class="glightbox-container">\n\t\t<div class="gloader visible"></div>\n\t\t<div class="goverlay"></div>\n\t\t<div class="gcontainer ctl_glightbox_container">\n\t\t<div id="glightbox-slider" class="gslider"></div>\n\t\t<button class="gnext gbtn" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n\t\t<button class="gprev gbtn" tabindex="1" aria-label="Previous">{prevSVG}</button>\n\t\t<button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n\t</div>\n\t</div>',lightboxMimalHTML='<div id="glightbox-body" class="glightbox-container">\n\t\t<div class="gloader visible"></div>\n\t\t<div class="goverlay"></div>\n\t\t<div class="gcontainer ctl_glightbox_container minimal-layout">\n\t\t<div id="glightbox-slider" class="gslider"></div>\n\t\t<button class="gnext gbtn" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n\t\t<button class="gprev gbtn" tabindex="1" aria-label="Previous">{prevSVG}</button>\n\t\t<button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n\t</div>\n\t</div>',Lightboxsvg={close:'<i class="ctl_glightbox_close_btn"></i>',next:'<i class="ctl_glightbox_hidden"></i>',prev:'<i class="ctl_glightbox_hidden"></i>'},ctlLineFilling=element=>{let parentWrp=element.data,timeline_year=parentWrp.find(".timeline-year"),timeline_icons=parentWrp.find(".timeline-icon"),lineFilling=parentWrp.data("line-filling"),Stories=parentWrp.find(".timeline-post");if(parentWrp.hasClass("main-design-6")&&(parentWrp.hasClass("one-sided-wrapper")||parentWrp.hasClass("both-sided-wrapper"))&&(timeline_icons=Stories),lineFilling&&Stories.length>0){let outerDiv=parentWrp.find(".cool-timeline");parentWrp.hasClass("compact-wrapper")?(outerDiv=parentWrp.find(".clt-compact-cont"),outerHeight=outerDiv.outerHeight()-36,0==outerDiv.height()&&element.async_callback&&ctl_Ver_LineFill_callback(parentWrp)):outerHeight=outerDiv.outerHeight(),rect=outerDiv[0].getBoundingClientRect(),height=jQuery(window).height()/2,centerLine=parentWrp.find(".ctl_center_line_filling"),rect.top<0?ctlTop=Math.abs(rect.top):ctlTop=-Math.abs(rect.top);let lineInerHeight=ctlTop+height,centerLIneHeight=centerLine.height();for(year of(lineInerHeight<=outerHeight&&centerLine.height(lineInerHeight),timeline_year)){let yearPosition,height;lineInerHeight>=jQuery(year)[0].offsetTop+jQuery(year).height()/1.5?jQuery(year).addClass("innerViewPort"):jQuery(year).removeClass("innerViewPort")}for(icons of timeline_icons){let iconsPosition=jQuery(icons)[0].offsetTop;parentWrp.hasClass("compact-wrapper")&&(IconTopPosition=jQuery(icons)[0],iconsPosition=IconTopPosition.offsetTop>0?IconTopPosition.parentElement.offsetTop:IconTopPosition.parentElement.offsetTop-20),lineInerHeight>=iconsPosition?jQuery(icons.closest(".timeline-post")).addClass("innerViewPort"):jQuery(icons.closest(".timeline-post")).removeClass("innerViewPort")}lineInerHeight>=outerHeight&&centerLIneHeight<outerHeight&&centerLine.height(outerHeight),lineInerHeight>0?(jQuery(parentWrp.find(".cool_timeline_start")).addClass("innerViewPort"),jQuery(parentWrp.find(".center-line")).addClass("BeforeViewPort")):(jQuery(parentWrp.find(".cool_timeline_start")).removeClass("innerViewPort"),jQuery(parentWrp.find(".center-line")).removeClass("BeforeViewPort")),lineInerHeight>=outerHeight?(jQuery(parentWrp.find(".cool_timeline_end")).addClass("innerViewPort"),jQuery(parentWrp.find(".center-line")).addClass("AfterViewPort")):(jQuery(parentWrp.find(".cool_timeline_end")).removeClass("innerViewPort"),jQuery(parentWrp.find(".center-line")).removeClass("AfterViewPort"))}};var timelineWrapper=$(".cool_timeline");timelineWrapper.each((function(){storySlideShow($(this)),ctlYearNavigation($(this));let data={data:$(this)};ctlLineFilling(data),jQuery(window).on("scroll",$(this),ctlLineFilling)})),ctlStoryAnimation();var ele_width=timelineWrapper.find(".timeline-content").find(".ctl_info").width(),value=ele_width-=20;value*=1;var valueHeight=Math.round(value/4*3);function Utils(){}timelineWrapper.find(".full-width > iframe").height(valueHeight),Utils.prototype={constructor:Utils,isElementInView:function(element,fullyInView){var pageTop=$(window).scrollTop(),pageBottom=pageTop+$(window).height(),elementTop=parseInt($(element).offset().top)+200,elementBottom=elementTop+parseInt($(element).height())-500;return!0===fullyInView?pageTop<elementTop&&pageBottom>elementBottom:elementTop<=pageBottom&&elementBottom>=pageTop}};var Utils=new Utils;function storySlideShow(container){container.find(".ctl_flexslider .slides").not(".slick-initialized").each((function(){var autoplaySpeed=parseInt($(this).data("animationspeed")),slideshow=$(this).data("slideshow"),animation=$(this).data("animation");if($(this).parents(".cool-timeline").hasClass("compact"))var autoHeight=!1;else var autoHeight=!0;$(this).slick({dots:!1,infinite:!1,arrows:!0,mobileFirst:!0,pauseOnHover:!0,slidesToShow:1,autoplay:slideshow,autoplaySpeed:autoplaySpeed,adaptiveHeight:autoHeight})}))}function ctlYearNavigation(timelineWrapper){var pagination=timelineWrapper.attr("data-pagination"),pagination_position=timelineWrapper.attr("data-pagination-position"),bull_cls="",position="";"left"==pagination_position?(bull_cls="section-bullets-left",position="left"):"right"==pagination_position?(bull_cls="section-bullets-right",position="right"):"bottom"==pagination_position&&(bull_cls="section-bullets-bottom",position="bottom"),timelineWrapper.each((function(index){var id=$(this).attr("id");void 0!==id&&"yes"==pagination&&$("body").sectionScroll({bulletsClass:bull_cls,sectionsClass:"scrollable-section",scrollDuration:1500,titles:!0,topOffset:2,easing:"",id:id,position:position})})),"yes"==pagination&&($(".ctl-bullets-container").hide(),timelineWrapper.each((function(){if(void 0!==$(this).attr("id")&&!1!==$(this).attr("id")){var id="#"+$(this).attr("id"),nav_id="#"+$(this).attr("id")+"-navi";$(nav_id).find("li").removeClass("active");var offset=$(id).offset(),t_height=$(id).height();$(window).scroll((function(){var isElementInView;Utils.isElementInView($(id),!1)?$(nav_id).show():$(nav_id).hide()}))}})))}function ctlStoryAnimation(){$(".cooltimeline_cont").each((function(index){var timeline_id=$(this).attr("id"),animations;"none"!=$("#"+timeline_id).attr("data-animations")&&AOS.init({disable:"mobile",startEvent:"DOMContentLoaded",offset:75,delay:0,duration:750,easing:"ease-in-out-sine",mirror:!0})}))}function storySlideShowLightbox(){jQuery(".ctl_glightbox_slideshow .slides").slick({dots:!1,infinite:!1,arrows:!0,mobileFirst:!0,pauseOnHover:!0,slidesToShow:1,centerMode:!0,autoplay:!1,centerPadding:"0px",adaptiveHeight:!0})}jQuery(window).on("load",(function($){var timeline_id=jQuery(".cooltimeline_cont").attr("id"),animations=jQuery("#"+timeline_id).attr("data-animations");"none"!=animations&&null!=animations&&setTimeout((function(){AOS.refresh()}),500)})),jQuery(document).on("click",".ctl_glightbox",(function(e){e.preventDefault();const lightbox=GLightbox({lightboxHTML:customLightboxHTML,svg:Lightboxsvg});let targetHref=this.getAttribute("href"),title=this.getAttribute("data-glightbox");lightbox.setElements([{href:targetHref,title:title}]),lightbox.open()})),jQuery(document).on("click",".minimal_glightbox",(function(e){e.preventDefault();const lightbox=GLightbox({lightboxHTML:lightboxMimalHTML,svg:Lightboxsvg,touchNavigation:!1});jQuery(".ctl_glightbox_slideshow .slides").hasClass("slick-initialized")&&jQuery(".ctl_glightbox_slideshow .slides").slick("unslick");let id=jQuery(this).attr("href"),image=jQuery(id).find(".ctl-popup-content .full-width>img, .ctl-popup-content .pull-left>img")[0],date=jQuery(id).find(".ctl-popup-content .popup-posted-date").html(),title=jQuery(id).find(".popup-content-title").html(),slideShow=jQuery(id).find(".ctl-popup-content .full-width.ctl_slideshow .ctl_popup_slick>ul>li>img"),desc=jQuery(id).find(".ctl-popup-content .ctl_popup_desc").html(),img=void 0;null!=image&&(img=image.src),lightbox.setElements(slideShow.length>0?[{content:`${popupSlick(slideShow)}<h2 class='ctl_glightbox_title'>${title}</h2><div class='ctl_glightbox_content'><div class='ctl_glightbox_date'>${date}</div><div class="ctl_glightbox_desc">${desc}</div></div>`,height:"auto",width:"500px"}]:null!=img?[{href:img,type:"image",description:`<div class='ctl_glightbox_content'><h2 class='ctl_glightbox_title'>${title}</h2><div class='ctl_glightbox_date'>${date}</div><div class="ctl_glightbox_desc">${desc}</div></div>`,height:"200px"}]:[{content:`<h2 class='ctl_glightbox_title'>${title}</h2><div class='ctl_glightbox_content'><div class='ctl_glightbox_date'>${date}</div><div class="ctl_glightbox_desc">${desc}</div></div>`,"max-width":"50vw",height:"auto"}]),lightbox.open(),storySlideShowLightbox()}));let sliderLightbox=GLightbox({selector:".ctl_glightbox_gallery",lightboxHTML:customLightboxHTML,svg:{close:'<i class="ctl_glightbox_close_btn"></i>'}});const ctl_Ver_LineFill_callback=async e=>{await new Promise(timer=>setTimeout(timer,100)),ctl_vertical_ling_filling({data:e,async_callback:!0})},centerHrLineFilling=e=>{let activeslide=e.pos;if(jQuery(e.id).find("li.slick-slide").removeClass("pi"),null!=activeslide)for(let i=0;i<activeslide;i++){let prevAll=jQuery(e.id).find("li")[i];jQuery(prevAll).addClass("pi")}};jQuery(".cool-timeline-horizontal").each((e,a)=>{let sliderContent="#"+jQuery(a).attr("date-slider"),sliderNav="#"+jQuery(a).attr("data-nav"),sliderStory="#"+jQuery(a).attr("date-slider"),lineFilling=jQuery(a).attr("data-line-filling"),startOn=parseInt(jQuery(a).attr("data-start-on")),items=parseInt(jQuery(a).attr("data-items")),totalslide=$(sliderContent+" li[data-term-slug]").length,lastshow_items=totalslide-startOn,PreviousSlide=startOn,navClick=!1;jQuery(a).hasClass("ht-design-7")||"true"==lineFilling&&(startOn>=totalslide-1?jQuery(sliderNav).addClass("line-full"):jQuery(sliderNav).removeClass("line-full"),jQuery(document).on("click",sliderNav+" li.slick-slide,"+sliderNav+" .ctl-slick-prev,"+sliderNav+" .ctl-slick-next",(function(){navClick=!0;let NavWrapper=jQuery(this).closest(".ctl_h_nav.slick-initialized"),index=NavWrapper[0].slick.currentSlide,currentSlider=NavWrapper[0].id;totalslide-1==index?NavWrapper.addClass("line-full"):NavWrapper.removeClass("line-full"),centerHrLineFilling({id:"#"+currentSlider,pos:parseInt(index)})})),jQuery(sliderStory).on("beforeChange",(function(event,slick,currentSlide,nextSlide){if(!navClick){let NavWrapper=jQuery(this).closest(".cool-timeline-horizontal").find(".ctl_h_nav.slick-initialized"),index=NavWrapper[0].slick.currentSlide,currentSlider=NavWrapper[0].id;totalslide-1==index?NavWrapper.addClass("line-full"):NavWrapper.removeClass("line-full"),centerHrLineFilling({id:"#"+currentSlider,pos:parseInt(index)})}navClick=!1})),jQuery(a).hasClass("ht-design-5")||jQuery(a).hasClass("ht-design-6")?startOn=startOn>=totalslide?totalslide-1:startOn:lastshow_items<items&&(startOn=totalslide-items),centerHrLineFilling({id:sliderNav,pos:startOn}))}),window.ctl_vertical_ling_filling=ctlLineFilling}));